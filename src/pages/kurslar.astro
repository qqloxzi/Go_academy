---
import BaseLayout from '../layouts/BaseLayout.astro';

const rawPosts = await Astro.glob('../pages/kurslar/*.md');
const pageTitle = "Eğitim Planları";
const allPosts = rawPosts.slice(0, 3); 
---

<BaseLayout pageTitle={pageTitle}>
  
  <h1 class="blog-page-title">{pageTitle}</h1>

  <ul class="blog-list" id="egitim-planlari-listesi">
    {allPosts.map((post) => (
      <li class="card blog-item"> 
        <a href={post.url} class="blog-link">
          {post.frontmatter.image && (
            <img src={post.frontmatter.image}  class="blog-image" alt={post.frontmatter.title} />
          )}
          <div class="blog-content">
            <h2 class="blog-post-title">{post.frontmatter.title}</h2>
            <p class="blog-description">{post.frontmatter.description}</p>
            
            {post.frontmatter.maddeler && Array.isArray(post.frontmatter.maddeler) && (
              <ul class="kart-maddeleri">
                {post.frontmatter.maddeler.map((madde) => (
                  <li>{madde}</li>
                ))}
              </ul>
            )}
          </div>
        </a>
      </li>
    ))}
  </ul>

  <a href="/lig" class="cta-box">
    <h3>Agora Online Lig</h3>
    <p>Lig formatındaki eğitim hakkında daha fazlası</p>
  </a>

  <style>
    /* === SADECE BU SAYFAYA ÖZEL STİLLER === */

    /* Kartların içindeki metni ortalamak için */
    .blog-item {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      text-align: center;
    }
    .blog-content {
      flex-grow: 1; 
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    /* Kartların içindeki madde listesi */
    .kart-maddeleri {
      list-style-type: disc; 
      list-style-position: inside; 
      padding-left: 0; 
      margin: 20px auto 0;
      font-size: 0.9rem; 
      color: #555; 
      max-width: 90%;
      text-align: left;
    }
    .kart-maddeleri li {
      margin-bottom: 4px; 
      padding: 0; 
      background-color: transparent; 
      border: none;
      transition: none;
    }
    .kart-maddeleri li:hover { background-color: transparent; } 
    
    html.dark .kart-maddeleri { 
      color: #ccc; 
    }
    html.dark .kart-maddeleri li {
      background-color: transparent;
      border: none;
    }
    html.dark .kart-maddeleri li:hover { 
      background-color: transparent; 
    }

    /* Altın Kutu Stilleri */
    .cta-box {
      display: block; max-width: 700px;
      margin: 50px auto 0 auto; padding: 25px 30px;
      background-color: #fffbeb; 
      border: 1px solid #f9a825; 
      border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      text-align: center; text-decoration: none; color: inherit;
      transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    }
    .cta-box:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      border-color: #facc15;
    }
    .cta-box h3 {
      margin-top: 0; margin-bottom: 10px;
      font-size: 1.5rem; 
      color: #78350f;
    }
    .cta-box p { 
      margin: 0; font-size: 1rem; 
      color: #92400e;
    }
    html.dark .cta-box {
      background-color: #2a200a;
      border-color: #785a0c;
    }
    html.dark .cta-box h3 { 
      color: #fde047;
    }
    html.dark .cta-box p { 
      color: #fef9c3;
    }
    html.dark .cta-box:hover { 
      border-color: #facc15;
    }
    
    /* Eğitim Planı Kutu Renkleri (Sadece bu sayfada çalışır) */
    #egitim-planlari-listesi li:nth-child(1).blog-item {
      background-color: #fff5f5; /* Kırmızı */
    }
    html.dark #egitim-planlari-listesi li:nth-child(1).blog-item {
      background-color: #2a1f1f; 
    }

    #egitim-planlari-listesi li:nth-child(2).blog-item {
      background-color: #f0f9ff; /* Mavi */
    }
    html.dark #egitim-planlari-listesi li:nth-child(2).blog-item {
      background-color: #1e2533; 
    }

    #egitim-planlari-listesi li:nth-child(3).blog-item {
      background-color: #f0fdf4; /* Yeşil */
    }
    html.dark #egitim-planlari-listesi li:nth-child(3).blog-item {
      background-color: #1f2a23; 
    }
  </style>

</BaseLayout>